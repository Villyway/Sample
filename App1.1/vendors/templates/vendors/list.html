{% extends "base.html" %}
{% load static %}

{% block title %}All Vendors{% endblock %}

{% block css %}

{% endblock css %}

{% block next_page %}
<li class="breadcrumb-item text-muted active" aria-current="page"><a
    href="{% url 'vendors:vendor-list' %}">Vendors</a> / <b class="text-dark">All<b></li>
{% endblock %}

{% block head %}
All Vendors
{% endblock %}

{% block content %}

<div class="container mt-3">
  <nav class="navbar navbar-expand-lg navbar-light  mb-5">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        </ul>
        <form method="post" class="d-flex">
          {% csrf_token %}
          <input class="form-control me-2" type="search" placeholder="GST NO" name="gst_no" aria-label="Search" required />
          <button class="btn btn-outline-primary" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>
  <div class="row">
    <div class="col-4">
      <input type="text" class="form-control" id="id_search" name="search" placeholder="Search" />      
    </div>
    <div class="col-8">
      
      <a href="{% url 'vendors:vendor-create' %}"><button type="button" class="btn btn-success  mb-2"
          style="float: right; ">Add New Vendor</button></a>
    </div>
    <div class="col-12">
      
      
      
      <!-- Basic Bootstrap Table -->
      <div class="card mt-3">
        <h5 class="card-header">All Vendors</h5>
        
        {% comment %} <a class="btn btn-success col-1">Add New</a> {% endcomment %}
        <div class="table-responsive text-nowrap">
          <table class="table">
            <thead>
              <tr>
                <th>No</th>
                <th>name</th>
                <th>Mobile</th>
                <th>Email</th>
                <th>GST No</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody class="table-border-bottom-0" id="id_vendors_list">
                {% for vendor in vendors %}
              <tr>
                <td>{{forloop.counter}}</td>
                {% comment %} <td>{{vendor.code}}</td> {% endcomment %}
                <td> <a href="{% url 'vendors:vendor-details' vendor.id %}">{{vendor.comany_name|upper}}</a></td>
                <td>{{vendor.mobile}}</td>
                <td>{{vendor.email|lower}}</td>
                <td>{{vendor.gst_no}}</td>
                <td> 
                    {% if vendor.is_active %}
                    <i class="fas fa-check text-success" style="font-size: 15px;"></i>
                    {% else %}
                    <i class="fas fa-times text-danger" style="font-size: 15px;"></i>
                    {% endif %}
                </td>
                <td>
                  <a href="{% url 'vendors:vendor-details' vendor.id %}" class="btn btn-success btn-circle " title="details"><i class="fa-regular fa-eye"></i></a>
                  <a href="{% url 'vendors:vendor-edit' vendor.id %}" class="btn btn-primary btn-circle "
                                title="Product Edit"><i class="fas fa-edit" aria-hidden="true"></i></a>
                  <a href="{% url 'vendors:vendor-delete' vendor.id %}" class="open-modal btn btn-danger btn-circle " data-toggle="modal"
                                data-target="" title="Delete"><i class="fa fa-trash"
                                    aria-hidden="true"></i></a>
                  
                </td>
              </tr>
              {% endfor %}

            </tbody>
          </table>
          
        </div>
        
      </div>
      <!--/ Basic Bootstrap Table -->
    </div>
  </div>
  <div class="row container-fluid mt-2">
    {% if vendors.paginator.num_pages > 1 %}
    {% include 'components/pagination.html' with items=vendors paginator=vendors.paginator %}
    {% endif %}
</div>
</div>
{% endblock content %}

{% block js %}
<script>
  $('#vendor-menu').addClass('active open');
  $('#sub-all-vendor').addClass('active')
</script>

<script>
  $(document).on("keyup", "#id_search", function () {
    var query = this.value;
    // var category = $()
    $.ajax({
        url: '/vendors/search/',
        type: 'GET',
        data: { 'query': query},
        success: function (data) {
          console.log(data)
            $('#id_vendors_list').html(data.data);
        }
    });
});
</script>
{% endblock js %}